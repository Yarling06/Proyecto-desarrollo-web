<!DOCTYPE html>
<html>
    <head>
        <title>Solicitar Cita - Salud Online</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/menu.css" rel="stylesheet" type="text/css"/>
        <link href="css/cita.css" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
    </head>
    <body>
        <header>
            <nav>
                <ul class="nav-menu">
                    <div class="nav-logo">
                        <img src="imagenes/Logo.png" alt="Logo">
                    </div>
                    <li class="nav-menu-item"><a class="nav-menu-link nav-link" href="index.html">Home</a></li>
                    <li class="nav-menu-item"><a class="nav-menu-link nav-link" href="imc.html">IMC</a></li>
                    <li class="nav-menu-item"><a class="nav-menu-link nav-link" href="recetas.html">Recetas Saludables</a></li>
                    <li class="nav-menu-item"><a class="nav-menu-link nav-link" href="ejercicios.html">Rutinas de ejercicios</a></li>
                    <li class="nav-menu-item"><a class="nav-menu-link nav-link" href="cita.html">Solicitar cita</a></li>
                    <li class="nav-menu-item"><a class="nav-menu-link nav-link" href="foro.html">Foro</a></li>
                    <li class="nav-menu-item"><a class="nav-menu-link nav-link" href="contacto.html">Contacto</a></li>
                    <li class="nav-menu-item"><a class="nav-menu-link nav-link" href="login.html">Login</a></li>
                </ul>
            </nav>
        </header>

        <section class="div-imagen-fondo">
            <div class="container">
                <h1>Solicitar Cita</h1>
                <form id="appointment-form" action="/guardar-cita" method="post">
                    <div class="form-group">
                        <label for="name">Nombre:</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="reason">Motivo de la cita:</label>
                        <input type="text" id="reason" name="reason" required>
                    </div>
                    <div class="form-group">
                        <label for="preferred-date">Fecha de preferencia:</label>
                        <input type="text" id="preferred-date" name="preferred-date" readonly required>
                    </div>
                    <div class="form-group">
                        <input type="submit" value="Solicitar Cita">
                    </div>
                </form>
            </div>

            <!-- Script para enviar la solicitud de cita -->
            <script>
                $(document).ready(function () {
                    $("#appointment-form").submit(function (event) {
                        event.preventDefault();

                        const nombre = $("#name").val();
                        const motivo = $("#reason").val();
                        const fechaPreferencia = $("#preferred-date").val();

                        const citaData = {
                            name: nombre,
                            reason: motivo,
                            "preferred-date": fechaPreferencia
                                    // Agregar más campos si es necesario
                        };

                        $.post("/guardar-cita", citaData, function (response) {
                            console.log(response);
                            // Puedes redirigir a una página de confirmación o realizar otras acciones
                        });
                    });

                    $("#preferred-date").datepicker({
                        minDate: new Date(2023, 0, 1),
                        maxDate: new Date(2023, 11, 31),
                        dateFormat: 'dd-mm-yy',
                        onSelect: function (dateText) {
                            var selectedDate = dateText;
                            console.log(selectedDate);
                        }
                    });
                });
            </script>
        </section>
    </body>
</html>
